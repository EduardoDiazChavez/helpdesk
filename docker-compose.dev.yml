services:
  helpdesk:
    build:
      context: .
      target: dev
    environment:
      NODE_ENV: development
      PORT: 8081
      DATABASE_URL: file:./prisma/dev.db
    command: npm run dev -- -H 0.0.0.0 -p ${PORT:-8081}
    ports:
      - "8081:8081"
    volumes:
      - .:/app
      - node_modules:/app/node_modules
      - prisma-data:/app/prisma
      - request-pictures:/app/tmp/request-pictures
    restart: unless-stopped

volumes:
  node_modules:
  prisma-data:
  request-pictures:
